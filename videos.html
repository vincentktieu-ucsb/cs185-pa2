<!doctype html>

<html lang='en'>
<head>
  <meta charset='utf-8'>

  <title>cs185-pa2</title>
  <meta name='description' content='cs185-pa2'>
  <meta name='author' content='Vincent Tieu'>

  <link rel='stylesheet' href='styles.css'>

</head>

<body>
  <header>
    <h3 class='nav-brand'>Vincent Tieu's PA2</h3>
    <nav>
      <ul class='nav-links'>
        <li><a href='index.html'>Text</a></li>
        <li><a href='images.html'>Images</a></li>
        <li><a href='videos.html' id='page-selected'>Videos</a></li>
        <li><a href='table.html'>Table</a></li>
        <li><a href='email.html'>Email</a></li>
      </ul>
    </nav>
  </header>

  <button onclick='topFunction()' id='back-to-top-btn'>&#8593;</button>

  <div class='modal'>
    <span class='close'>&times;</span>
    <video class='modal-content' controls>
      <source src='' type='video/mp4'>
    </video>
  </div>

  <div class='container'>
    <h1>Videos.</h1>
    <br/>
    <p>
      I couldn't think of any good videos so these are all rick roll videos.
      You should probably mute. I'm warning you!
    </p>
    <div class='featured-section'>
      <video class='featured' width='300px' height='200px' controls>
        <source src='videos/rick-1.mp4' type='video/mp4'>
      </video>
      <video class='featured' width='300px' height='200px' controls>
        <source src='videos/rick-2.mp4' type='video/mp4'>
      </video>
      <video class='featured' width='300px' height='200px' controls>
        <source src='videos/rick-3.mp4' type='video/mp4'>
      </video>
      <video class='featured' width='300px' height='200px' controls>
        <source src='videos/rick-4.mp4' type='video/mp4'>
      </video>
    </div>
    <br/>
    <p>*Click play button to play in place or click video to enlarge*</p>
  </div>
  <script>
    // inspired by https://www.w3schools.com/howto/howto_js_scroll_to_top.asp
    var backToTopBtn = document.getElementById('back-to-top-btn');
    
    window.onscroll = () => scrollFunction();
    
    function scrollFunction() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        backToTopBtn.style.display = 'block';
      } else {
        backToTopBtn.style.display = 'none';
      }
    }
    
    function topFunction() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }

    // inspired by https://www.w3schools.com/howto/howto_css_modal_images.asp
    let modal = document.getElementsByClassName('modal')[0];
    let modalVideo = document.getElementsByClassName('modal-content')[0];
    let videos = document.getElementsByClassName('featured');
    let activeVideo;
    for (let i = 0; i < videos.length; i++) {
      videos[i].onclick = function(){
        activeVideo = videos[i];
        videos[i].play();
        modal.style.display = 'block';
        modalVideo.src = activeVideo.getElementsByTagName('source')[0].src;
        modalVideo.currentTime = activeVideo.currentTime;
        backToTopBtn.style.display = 'none';
      }
    }

    let span = document.getElementsByClassName('close')[0];

    span.onclick = function() { 
      modal.style.display = 'none';
      modalVideo.pause();
      activeVideo.currentTime = modalVideo.currentTime;
      scrollFunction();
    }

    modal.addEventListener('click', (e) => {
      if (e.target !== modalVideo) {
        modal.style.display = 'none';
        modalVideo.pause();
        activeVideo.currentTime = modalVideo.currentTime;
        scrollFunction();
      }
    });
  </script>
</body>
</html>